#!/usr/bin/python
#
# Copyright 2005 Google Inc. All Rights Reserved.

"""
One-line documentation for sample module

Detailed documentation
"""

import sys
import random
import getopt

__author__ = "deshwal@google.com (Priyendra Deshwal)"

def usage():
  print "Usage: %s --num NUM --file FILE\n"\
        "  NUM:  The number of lines to sample\n"\
        "  FILE: The file from which to sample\n"\
        "        (If this is not specified, sample reads from stdin)"\
        % sys.argv[0].split("/")[-1]

def get_cmd_line_args(argv):
  try:
    (opts, args) = getopt.gnu_getopt(argv, "",
                                     [ "help",
                                       "file=",
                                       "num=" ])
  except getopt.GetoptError:
    usage()
    sys.exit(2)

  num = 0
  file = sys.stdin

  for o, a in opts:
    if o == "--num":
      num = int(a)
    if o == "--file":
      try:
        file = open(a)
      except:
        print "Could not open file: ", a
        sys.exit(2)
    if o == "--help":
      usage()
      sys.exit(2)
  return (num, file)


def Main():
  (num, file) = get_cmd_line_args(sys.argv[1:])
  count = 0
  lines = {}
  for line in file:
    lines[count] = line
    count = count + 1

  if num == -1 or num > count:
    num = count

  sampled = random.sample(range(0, count), num)
  for index in sampled:
    print lines[index],

if __name__ == '__main__':
  Main()
